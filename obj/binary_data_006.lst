ca65 V2.18 - N/A
Main file   : src/binary_data_006.asm
Current file: src/binary_data_006.asm

000000r 1               ;*******************************************************************************
000000r 1               ;*                                                                             *
000000r 1               ;*                          M A G I C   C A S T L E                            *
000000r 1               ;*                                                                             *
000000r 1               ;*                                     by                                      *
000000r 1               ;*                                                                             *
000000r 1               ;*                                 BRUCE MAY                                   *
000000r 1               ;*                                                                             *
000000r 1               ;*                  for the ATARI 8-bit Home Computer System                   *
000000r 1               ;*                                                                             *
000000r 1               ;*                            [PAGE 6 BINARY DATA]                             *
000000r 1               ;*                                                                             *
000000r 1               ;*       Reverse engineered and documented assembly language source code       *
000000r 1               ;*                                                                             *
000000r 1               ;*                                     by                                      *
000000r 1               ;*                                                                             *
000000r 1               ;*                             Michael Sternberg                               *
000000r 1               ;*                                 (@16kRAM)                                   *
000000r 1               ;*                                                                             *
000000r 1               ;*                               First Release                                 *
000000r 1               ;*                                DD-MMM-YYYY                                  *
000000r 1               ;*                                                                             *
000000r 1               ;*                                Last Update                                  *
000000r 1               ;*                                DD-MMM-YYYY                                  *                                                                       *
000000r 1               ;*******************************************************************************
000000r 1               ; da65 V2.18 - N/A
000000r 1               ; Created:    2020-03-30 22:36:32
000000r 1               ; Input file: ../obj/BIN00006.BIN
000000r 1               
000000r 1                               .setcpu "6502"
000000r 1               
000000r 1               ;*******************************************************************************
000000r 1               ;*                                                                             *
000000r 1               ;*                             M E M O R Y   M A P                             *
000000r 1               ;*                                                                             *
000000r 1               ;*******************************************************************************
000000r 1               ; 0600..06FF    Display Lists and ML/DLI routines
000000r 1               ; 8100..815F    Scroll Up ML Routine
000000r 1               ; 8160..81FF    Scroll Down ML Routine
000000r 1               ; 8200..82FF    Message strings
000000r 1               ; 8300..84FF    Void.1 map
000000r 1               ; 8500..87FF    Title Screen
000000r 1               ; 8800..89FF    Custom Character Set
000000r 1               ; 8A00..8FFF    Castle maps
000000r 1               ; 9000..9883    Room Name Table
000000r 1               ; 9884..99B6    Object Name Table (Friends/Foes/Items)
000000r 1               ;
000000r 1               
000000r 1               ;*******************************************************************************
000000r 1               ;*                                                                             *
000000r 1               ;*                         S Y S T E M   S Y M B O L S                         *
000000r 1               ;*                                                                             *
000000r 1               ;*******************************************************************************
000000r 1               LOMEM           := $00CE
000000r 1               HIMEM           := $00CF
000000r 1               VDSLST          := $0200                        ; Vector for NMI Display List interrupts
000000r 1               SDMCTL          := $022F                        ; DMA enable
000000r 1               SDLSTL          := $0230                        ; Display List start addr (lo)
000000r 1               SDLSTH          := $0231                        ; Display List start addr (hi)
000000r 1               
000000r 1               COLOR4          := $02C8                        ; Backgr & border color register
000000r 1               
000000r 1               VSCROL          := $D405                        ; Vertical scroll enable
000000r 1               CHBASE          := $D409                        ; Character set base address
000000r 1               WSYNC           := $D40A                        ; Wait for horizontal sync
000000r 1               VCOUNT          := $D40B                        ; Vertical Line Counter
000000r 1               
000000r 1               DARK_BLUE       = $90
000000r 1               
000000r 1               ;EXEHDR:         .byte   $FF,$FF
000000r 1  00 06                        .byte   $00,$06
000002r 1  FF 06                        .byte   $FF,$06
000004r 1               
000004r 1                               .org    $0600
000600  1               PAGE6:
000600  1               ;*******************************************************************************
000600  1               ;*                                                                             *
000600  1               ;*                                wait_vblank                                  *
000600  1               ;*                                                                             *
000600  1               ;*           Wait until CRT electron gun reaches bottom of screen              *
000600  1               ;*                                                                             *
000600  1               ;*******************************************************************************
000600  1  68                           PLA                             ; Pop stack
000601  1  AD 0B D4     :               LDA     VCOUNT                  ; Get vertical line counter
000604  1  C9 60                        CMP     #192/2                  ;
000606  1  30 F9                        BMI     :-                      ; If less than 192, then loop
000608  1  60                           RTS                             ; Otherwise exit.
000609  1               ;*******************************************************************************
000609  1               ;*                                U N U S E D                                  *
000609  1               ;*******************************************************************************
000609  1  00 00 00 00                  .byte   $00,$00,$00,$00,$00,$00,$00,$00
00060D  1  00 00 00 00  
000611  1               
000611  1               ;*******************************************************************************
000611  1               ;*                                                                             *
000611  1               ;*                                ???????????                                  *
000611  1               ;*                                                                             *
000611  1               ;*                                  ????????                                   *
000611  1               ;*                                                                             *
000611  1               ;*******************************************************************************
000611  1               L0611:
000611  1  68                           PLA                             ; Pop stack
000612  1                               ; Wait for vblank
000612  1  AD 0B D4     :               LDA     VCOUNT                  ; Get vertical line counter
000615  1  C9 60                        CMP     #192/2                  ;
000617  1  30 F9                        BMI     :-                      ; If less than 192, then loop
000619  1               
000619  1  68                           PLA                             ; Pop
00061A  1  68                           PLA                             ;
00061B  1  8D 05 D4                     STA     VSCROL                  ; Change Vertical Scroll Enable
00061E  1  68                           PLA                             ;
00061F  1  8D 85 06                     STA     L0685                   ; Change Display list entry
000622  1  68                           PLA                             ;
000623  1  8D 84 06                     STA     L0684                   ; Change Display list entry
000626  1  60                           RTS                             ; Done
000627  1               
000627  1               ;*******************************************************************************
000627  1               ;*                                                                             *
000627  1               ;*                                  ???????                                    *
000627  1               ;*                                                                             *
000627  1               ;*                                 ?????????                                   *
000627  1               ;*                                                                             *
000627  1               ;*******************************************************************************
000627  1               L0627:
000627  1  68                           PLA                             ; 0627 68                       h
000628  1               
000628  1  68                           PLA                             ; 0628 68                       h
000629  1  85 D0                        STA     $D0                     ; 0629 85 D0                    ..
00062B  1               
00062B  1  68                           PLA                             ; 062B 68                       h
00062C  1  85 CF                        STA     $CF                     ; 062C 85 CF                    ..
00062E  1               
00062E  1  68                           PLA                             ; 062E 68                       h
00062F  1  85 CE                        STA     $CE                     ; 062F 85 CE                    ..
000631  1               
000631  1  68                           PLA                             ; 0631 68                       h
000632  1  85 CD                        STA     $CD                     ; 0632 85 CD                    ..
000634  1               
000634  1  68                           PLA                             ; 0634 68                       h
000635  1  85 CC                        STA     $CC                     ; 0635 85 CC                    ..
000637  1               
000637  1  68                           PLA                             ; 0637 68                       h
000638  1  38                           SEC                             ; 0638 38                       8
000639  1  E9 01                        SBC     #$01                    ; 0639 E9 01                    ..
00063B  1  85 CB                        STA     $CB                     ; 063B 85 CB                    ..
00063D  1               
00063D  1  B1 CF        L063D:          LDA     ($CF),Y                 ; 063D B1 CF                    ..
00063F  1  91 CD                        STA     ($CD),Y                 ; 063F 91 CD                    ..
000641  1  C8                           INY                             ; 0641 C8                       .
000642  1  D0 0E                        BNE     :+                      ; 0642 D0 0E                    ..
000644  1               
000644  1  A5 CE                        LDA     $CE                     ; 0644 A5 CE                    ..
000646  1  18                           CLC                             ; 0646 18                       .
000647  1  69 01                        ADC     #$01                    ; 0647 69 01                    i.
000649  1  85 CE                        STA     $CE                     ; 0649 85 CE                    ..
00064B  1               
00064B  1  A5 D0                        LDA     $D0                     ; 064B A5 D0                    ..
00064D  1  18                           CLC                             ; 064D 18                       .
00064E  1  69 01                        ADC     #$01                    ; 064E 69 01                    i.
000650  1  85 D0                        STA     $D0                     ; 0650 85 D0                    ..
000652  1               
000652  1  A5 CB        :               LDA     $CB                     ; 0652 A5 CB                    ..
000654  1  C9 00                        CMP     #$00                    ; 0654 C9 00                    ..
000656  1  D0 11                        BNE     :+                      ; 0656 D0 11                    ..
000658  1  38                           SEC                             ; 0658 38                       8
000659  1  E9 01                        SBC     #$01                    ; 0659 E9 01                    ..
00065B  1  85 CB                        STA     $CB                     ; 065B 85 CB                    ..
00065D  1               
00065D  1  A5 CC                        LDA     $CC                     ; 065D A5 CC                    ..
00065F  1  C9 00                        CMP     #$00                    ; 065F C9 00                    ..
000661  1  D0 0E                        BNE     :++                     ; 0661 D0 0E                    ..
000663  1  A5 CB                        LDA     $CB                     ; 0663 A5 CB                    ..
000665  1  C9 FF                        CMP     #$FF                    ; 0665 C9 FF                    ..
000667  1  F0 10                        BEQ     L0679                   ; 0667 F0 10                    ..
000669  1               
000669  1  38           :               SEC                             ; 0669 38                       8
00066A  1  E9 01                        SBC     #$01                    ; 066A E9 01                    ..
00066C  1  85 CB                        STA     $CB                     ; 066C 85 CB                    ..
00066E  1               
00066E  1  4C 3D 06                     JMP     L063D                   ; 066E 4C 3D 06                 L=.
000671  1               
000671  1  38           :               SEC                             ; 0671 38                       8
000672  1  E9 01                        SBC     #$01                    ; 0672 E9 01                    ..
000674  1  85 CC                        STA     $CC                     ; 0674 85 CC                    ..
000676  1  4C 3D 06                     JMP     L063D                   ; 0676 4C 3D 06                 L=.
000679  1               
000679  1  60           L0679:          RTS                             ; 0679 60                       `
00067A  1               
00067A  1               ;*******************************************************************************
00067A  1               ;*                                U N U S E D                                  *
00067A  1               ;*******************************************************************************
00067A  1               ;L067A
00067A  1  00 00 00 00                  .byte   $00,$00,$00,$00,$00,$00
00067E  1  00 00        
000680  1               
000680  1               ;*******************************************************************************
000680  1               ;*                     G A M E   D I S P L A Y   L I S T                       *
000680  1               ;*******************************************************************************
000680  1               ;DLIST1:
000680  1               DL_GAME:
000680  1               L0680:
000680  1  70 70 70                     .byte   $70,$70,$70             ; 3x8 BLANK
000683  1  67                           .byte   $67                     ; VSCROL MODE 7
000684  1  E0           L0684:          .byte   $E0                     ; DLI 7 BLANK       0684 E0                       .
000685  1  8B           L0685:          .byte   $8B                     ; DLI MODE b        0685 8B                       .
000686  1  27 27 27 27                  .byte   $27,$27,$27,$27         ; 8xSCROLL MODE 7
00068A  1  27 27 27 27                  .byte   $27,$27,$27,$27
00068E  1  07                           .byte   $07                     ; MODE 7            068E 07                       .
00068F  1  C7                           .byte   $C7                     ; DLI MODE 7        068F C7                       .
000690  1  6C                           .byte   $6C                     ; VSCROLL MODE c
000691  1  9B                           .byte   $9B                     ; DLI HSCROLL MODE b
000692  1  42 60 9F                     .byte   $42,$60,$9F             ; LMS $9F60 MODE 2
000695  1  02 02 02                     .byte   $02,$02,$02             ; 3xMODE 2
000698  1  41 80 06                     .byte   $41,$80,$06             ; JVB DL_GAME ($0680)
00069B  1               
00069B  1               ;*******************************************************************************
00069B  1               ;*                                                                             *
00069B  1               ;*                           Display List Interrupt                            *
00069B  1               ;*                                                                             *
00069B  1               ;*                                                                             *
00069B  1               ;*                                                                             *
00069B  1               ;*******************************************************************************
00069B  1               ;L069B
00069B  1               DLI:
00069B  1  48                           PHA                             ; Stash A before trashing it
00069C  1  A9 E0                        LDA     #$E0                    ; E0 -> Default char set in ROM
00069E  1  8D 0A D4                     STA     WSYNC                   ; Wait for horizontal sync
0006A1  1  8D 09 D4                     STA     CHBASE                  ; Set character set to default
0006A4  1  68                           PLA                             ; Restore A
0006A5  1  40                           RTI                             ; Done
0006A6  1               
0006A6  1               ;*******************************************************************************
0006A6  1               ;*                                U N U S E D                                  *
0006A6  1               ;*******************************************************************************
0006A6  1  00 00 00                     .byte   $00,$00,$00
0006A9  1               
0006A9  1               ;*******************************************************************************
0006A9  1               ;*                   T I T L E    D I S P L A Y   L I S T                      *
0006A9  1               ;*******************************************************************************
0006A9  1               ;L06A9
0006A9  1               ;DLIST2:
0006A9  1               DL_TITLE:
0006A9  1  70 70 70                     .byte   $70,$70,$70             ; 3x8 BLANK
0006AC  1  47 00 85                     .byte   $47,$00,$85             ; LMS $8500 MODE 7
0006AF  1  07 07 07 07                  .byte   $07,$07,$07,$07,$07     ; 5xMODE 7
0006B3  1  07           
0006B4  1  02 02 02 02                  .byte   $02,$02,$02,$02,$02,$02 ; 12xMODE 2
0006B8  1  02 02        
0006BA  1  02 02 02 02                  .byte   $02,$02,$02,$02,$02,$02
0006BE  1  02 02        
0006C0  1  41 A9 06                     .byte   $41,$A9,$06             ; JVB DL_TITLE ($06A9)
0006C3  1               
0006C3  1               ;*******************************************************************************
0006C3  1               ;*                                U N U S E D                                  *
0006C3  1               ;*******************************************************************************
0006C3  1               ;L06C3
0006C3  1  00 00 00 00                  .byte   $00,$00,$00,$00,$00,$00,$00,$00
0006C7  1  00 00 00 00  
0006CB  1  00 00 00 00                  .byte   $00,$00,$00,$00,$00,$00
0006CF  1  00 00        
0006D1  1               
0006D1  1               ;*******************************************************************************
0006D1  1               ;*                                                                             *
0006D1  1               ;*                                  loadngo                                    *
0006D1  1               ;*                                                                             *
0006D1  1               ;*                      Set display list for Title Page                        *
0006D1  1               ;*                                                                             *
0006D1  1               ;*******************************************************************************
0006D1  1               ;L06D1
0006D1  1  A9 00                        LDA     #$00                    ; Disable DMA to video (ANTIC)
0006D3  1  8D 2F 02                     STA     SDMCTL                  ;
0006D6  1               
0006D6  1  A9 A9                        LDA     #<DL_TITLE              ; Point to Title Screen Display
0006D8  1  8D 30 02                     STA     SDLSTL                  ; List
0006DB  1               
0006DB  1  A9 06                        LDA     #>DL_TITLE              ;
0006DD  1  8D 31 02                     STA     SDLSTH                  ;
0006E0  1               
0006E0  1  A9 9B                        LDA     #<DLI                   ; Point to Display List Interrupt
0006E2  1  8D 00 02                     STA     VDSLST                  ; routine
0006E5  1               
0006E5  1  A9 06                        LDA     #>DLI                   ;
0006E7  1  8D 01 02                     STA     VDSLST+1                ;
0006EA  1               
0006EA  1  A9 22                        LDA     #$22                    ; Re-enable DMA to video (ANTIC)
0006EC  1  8D 2F 02                     STA     SDMCTL                  ; & set playfield to std width
0006EF  1               
0006EF  1  A9 95                        LDA     #DARK_BLUE + $05        ; Set playfield background
0006F1  1  8D C8 02                     STA     COLOR4                  ; to blue
0006F4  1               
0006F4  1  60                           RTS                             ; 06F4 60                       `
0006F5  1               
0006F5  1               ;*******************************************************************************
0006F5  1               ;*                                U N U S E D                                  *
0006F5  1               ;*******************************************************************************
0006F5  1  00 00 00 00                  .byte   $00,$00,$00,$00,$00,$00,$00,$00
0006F9  1  00 00 00 00  
0006FD  1  00 00 00                     .byte   $00,$00,$00
000700  1               ;L0700
000700  1               
